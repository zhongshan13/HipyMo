{%- if section.blocks.size > 0 -%}
  {%- style -%}
    #shopify-section-{{- section.id -}} {
    	padding-top: {{- section.settings.offset_top_mobile -}}px;
    	padding-bottom: {{- section.settings.offset_bottom_mobile -}}px;
    }

    @media screen and (min-width: 768px) {
    	#shopify-section-{{- section.id -}} {
    		padding-top: {{- section.settings.offset_top_desktop -}}px;
    		padding-bottom: {{- section.settings.offset_bottom_desktop -}}px;
    	}
    }
  {%- endstyle -%}
  <style>
     .ante-gallery-carousel .ante-gallery-carousel .ante-gallery-carousel_box {
       display: flex;
       gap: 20px;
     }
     .ante-gallery-carousel .ante-gallery-carousel .ante-left {
       flex: 0 0 auto; /* 固定宽度，根据需要调整 */
       width: 300px; /* 例如300px */
     }

     .ante-gallery-carousel .ante-gallery-carousel .ante-right {
       flex: 1 1 auto; /* 占剩余空间，Swiper自适应宽度 */
       min-width: 0;
     }
     .ante-gallery-carousel .ante-gallery-carousel .ante-bg {
       background-color: var(--bg-color);

       height: 100%;
     }
     .ante-gallery-carousel .ante-right .swiper-slide {
       cursor: grab;
       aspect-ratio: 1 / 1;
     }
     .ante-gallery-carousel .ante-right .swiper-slide:active {
       cursor: grabbing;
     }
     .ante-gallery-carousel .ante-right .gallery-carousel__item-image {
       position: absolute;
       top: 0;
       left: 0;
       width: 100%;
       height: 100%;
       -o-object-fit: cover;
       object-fit: cover;
     }
     .ante-gallery-carousel .ante-gallery-carousel_box .ante-left .ante-bg {
       display: flex;
       flex-direction: column;
       justify-content: center;
       align-items: center;
       text-align: center;
     }
     .ante-gallery-carousel .ante-gallery-carousel_box .ante-left .ante-bg .ante-box,
     .ante-gallery-carousel .ante-gallery-carousel_box .ante-left .ante-bg .ante-box .ante-title {
       box-sizing: border-box;
       font-weight: 700;
       color: var(--ante-color);
     }
     .ante-gallery-carousel .ante-gallery-carousel_box .ante-left .ante-bg .ante-box .ante-text {
       margin-top: 10px;
     }
     .ante-gallery-carousel .swiper-slide .ante-info{
       position: absolute;
       bottom: 0;
       width: 100%;
       height: 50%;
       background-color: {{ section.settings.bg_color }}50;
       backdrop-filter: blur(8px);
       -webkit-backdrop-filter: blur(8px);
       color: var(--ante-color);
       transform: translateY(100%);
       transition: transform 0.5s;
       z-index: 1;
     }
     .ante-gallery-carousel .swiper-slide:hover .ante-info{
       transform: translateY(0);
     }
    .ante-gallery-carousel .swiper-slide .ante-info .ante-box{
       position: relative;
       width: 100%;
       height: 100%;
       display: flex;
       justify-content: center;
       align-items: center;
       text-align: center;
       padding: 20px 10px;
     }
     .ante-gallery-carousel .swiper-slide .ante-info .ante-box p{
        display: -webkit-box;
       -webkit-box-orient: vertical;
       -webkit-line-clamp: 4;
       overflow: hidden;
       text-overflow: ellipsis;
     }
     .ante-gallery-carousel .ante-left .ante-title.h3{
       font-size: 36px;
     }
     .ante-gallery-carousel .swiper-button-prev:after,
     .ante-gallery-carousel .swiper-button-next:after{
        content: unset;
     }
     .ante-gallery-carousel .swiper-button-prev,
     .ante-gallery-carousel .swiper-button-next{
        width: 44px;
        height: 44px;
        background: #ab9b81;
        border-radius: 50%;
        display: flex;
        justify-content: center;
        align-items: center;
        cursor: pointer;
    }
    .ante-gallery-carousel .swiper-button-prev svg,
    .ante-gallery-carousel .swiper-button-next svg{
      width: auto;
      height: auto;
    }
    @media (max-width:768px) {
      .ante-gallery-carousel .ante-gallery-carousel .ante-left{
          display: none;
      }
      .ante-gallery-carousel .swiper-slide .ante-info .ante-box p{
       -webkit-line-clamp: 2;
     }
     .ante-gallery-carousel .swiper-slide-active .ante-info{
       transform: translateY(0);
     }
    .ante-gallery-carousel .swiper-button-prev,
     .ante-gallery-carousel .swiper-button-next{
      display: none;
     }
    }
  </style>
  {%- assign label = section.settings.label -%}
  {%- assign heading = section.settings.heading -%}
  {%- assign is_lazy = true -%}
  {%- if section.block.size == 1 -%}
    {%- assign is_lazy = false -%}
  {%- endif -%}
  <section
    class="ante-gallery-carousel gallery-carousel js-gallery-carousel js-animate"
    id="gallery-carousel--{{ section.id }}"
  >
    {%- if label != blank or heading != blank -%}
      <div class="gallery-carousel__header">
        {%- if label != blank -%}
          <div class="gallery-carousel__label">
            {{- label -}}
          </div>
        {%- endif -%}

        {%- if heading != blank -%}
          <h2 class="gallery-carousel__heading h2">
            {{- heading -}}
          </h2>
        {%- endif -%}
      </div>
    {%- endif -%}
    <div class="ante-gallery-carousel">
      <div class="ante-gallery-carousel_box">
        <div class="ante-left">
          <div
            class="ante-bg"
            style="--bg-color: {{ section.settings.bg_color }};--ante-color:{{ section.settings.color  }};"
          >
            <div
              class="ante-box"
            >
              <div class="ante-title h3">
                {{ section.settings.title }}
              </div>
              <div class="ante-text">
                {{ section.settings.info }}
              </div>
            </div>
          </div>
        </div>
        <div class="ante-right">
          <ante-carousel
            data-row="{{ section.settings.pc_row }}"
            data-autoplay-{{ section.settings.enable_autoplay }}
            data-autoplay="{{ section.settings.autoplay_speed }}"
          >
            <div class="swiper">
              <div class="swiper-wrapper">
                {%- for block in section.blocks -%}
                  {%- assign link = block.settings.link -%}
                  {%- assign image = block.settings.image -%}
                  <div class="swiper-slide">
                    <div class="ante-info" style="--ante-color:{{ section.settings.color  }};">
                      <div class="ante-box">
                        <p>{{ block.settings.info | strip_html }}</p>
                      </div>
                    </div>
                    {% render 'ante-gallery-carousel-slide', image: image, link: link, is_lazy: is_lazy %}
                  </div>
                {%- endfor -%}
              </div>
              <div class="swiper-container">
                <div class="swiper-button-next">
                  <svg
                    t="1753954264912"
                    class="icon"
                    viewBox="0 0 1024 1024"
                    version="1.1"
                    xmlns="http://www.w3.org/2000/svg"
                    p-id="1470"
                    width="24"
                    height="24"
                  >
                    <path d="M758.528 512L384 886.528l-60.330667-60.330667 313.984-314.453333-310.954666-310.912L386.986667 140.501333z" fill="#fff" p-id="1471"></path>
                  </svg>
                </div>
                <div class="swiper-button-prev">
                  <svg
                    t="1753954517804"
                    class="icon"
                    viewBox="0 0 1024 1024"
                    version="1.1"
                    xmlns="http://www.w3.org/2000/svg"
                    p-id="6126"
                    width="24"
                    height="24"
                  >
                    <path d="M259.621992 511.51086 338.343915 432.78996 338.5189 432.983365 707.532325 63.96994 764.376984 120.815623 409.900647 511.696078 764.376984 902.576533 707.532325 959.421192 338.5189 590.407768 338.343915 590.601172 259.621992 511.880273 259.806187 511.695055Z" fill="#fff" p-id="6127"></path>
                  </svg>
                </div>
              </div>
            </div>
          </ante-carousel>
        </div>
      </div>
    </div>
  </section>
{%- endif -%}

{%- schema -%}
{
  "name": "Ante Gallery carousel",
  "disabled_on": {
    "groups": ["header", "footer"]
  },
  "settings": [
    {
      "type": "text",
      "id": "label",
      "label": "Label"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Ante Gallery Carousel"
    },
    {
      "type": "header",
      "content": "Slideshow settings"
    },
    {
      "type": "checkbox",
      "id": "enable_autoplay",
      "label": "Autoplay",
      "default": true
    },
    {
      "type": "range",
      "id": "autoplay_speed",
      "min": 3,
      "max": 15,
      "step": 1,
      "unit": "s",
      "label": "Autoplay speed",
      "default": 3
    },
    {
      "type": "range",
      "id": "pc_row",
      "min": 4,
      "max": 7,
      "step": 0.1,
      "label": "PC_row",
      "default": 4.5
    },
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "range",
      "id": "offset_top_desktop",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Desktop offset top",
      "default": 0
    },
    {
      "type": "range",
      "id": "offset_bottom_desktop",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Desktop offset bottom",
      "default": 0
    },
    {
      "type": "range",
      "id": "offset_top_mobile",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Mobile offset top",
      "default": 0
    },
    {
      "type": "range",
      "id": "offset_bottom_mobile",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Mobile offset bottom",
      "default": 0
    },
    {
      "type": "header",
      "content": "Left box"
    },
    {
      "type": "color",
      "id": "bg_color",
      "label": "Background",
      "default": "#EEEEEE"
    },
    {
      "type": "color",
      "id": "color",
      "label": "Text color",
      "default": "#000000"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Title"
    },
    {
      "type": "text",
      "id": "info",
      "label": "Info"
    }
  ],
  "blocks": [
    {
      "name": "Slide",
      "type": "slide",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image",
          "info": "1130 x 1130px recommended"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Link"
        },
        {
          "type": "richtext",
          "id": "info",
          "label": "Info"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Ante Gallery carousel",
      "settings": {},
      "blocks": [
        {
          "type": "slide"
        },
        {
          "type": "slide"
        },
        {
          "type": "slide"
        },
        {
          "type": "slide"
        },
        {
          "type": "slide"
        },
        {
          "type": "slide"
        }
      ]
    }
  ]
}
{%- endschema -%}
